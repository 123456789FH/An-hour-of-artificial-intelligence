<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ุฑุญูุฉ ุฅูู ูุฏุฑุณุฉ ุงููุณุชูุจู | ุณุงุนุฉ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

  <!-- QR generator -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

  <style>
    *{ font-family: "Tajawal", sans-serif; }

    /* โ ุชุญุณูู ูุถูุญ ุงูููุงุฆู ุงูููุณุฏูุฉ */
    html { color-scheme: dark; }
    select{
      color: #fff !important;
      background: rgba(255,255,255,.10) !important;
      border-color: rgba(255,255,255,.18) !important;
    }
    select option{
      background: #1b0b2a !important;
      color: #ffffff !important;
    }
    select option:checked{
      background: #3b145f !important;
    }

    .glass{ background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.16); }
    .soft-shadow{ box-shadow: 0 18px 60px rgba(0,0,0,.28); }
    .ring-soft{ outline: 3px solid rgba(255,255,255,.10); outline-offset: 2px; }
    .chip input{ display:none; }
    .chip span{ user-select:none; }
    .chip input:checked + span{
      background: rgba(236, 72, 153, .20);
      border-color: rgba(236, 72, 153, .50);
      transform: translateY(-1px);
    }
    .fade-in{ animation: fadeIn .35s ease-out; }
    @keyframes fadeIn{ from{opacity:0; transform: translateY(6px);} to{opacity:1; transform: translateY(0);} }
  </style>
</head>

<body class="min-h-screen text-white">
  <!-- Background -->
  <div class="fixed inset-0 -z-10">
    <div class="absolute inset-0 bg-gradient-to-br from-[#3b135f] via-[#7c1b6b] to-[#f43f5e] opacity-95"></div>
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(255,255,255,0.16),transparent_40%),radial-gradient(circle_at_80%_30%,rgba(59,130,246,0.18),transparent_40%),radial-gradient(circle_at_50%_90%,rgba(236,72,153,0.18),transparent_45%)]"></div>
  </div>

  <header class="max-w-6xl mx-auto px-4 pt-10 pb-6">
    <div class="glass soft-shadow rounded-3xl p-6 md:p-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">

        <!-- Title + Logo -->
        <div class="flex items-start gap-4">
          <!-- ุถุน ุดุนุงุฑู ููุง (ุถุน ููู logo.png ุจุฌุงูุจ index.html) -->
          <img
            src="logo.png"
            alt="ุดุนุงุฑ ุงูููุชูู ุงูุชูุงุนูู"
            class="w-14 h-14 rounded-2xl bg-white/80 p-1 ring-1 ring-white/30 object-contain"
            onerror="this.style.display='none'"
          />

          <div>
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/15">
              <span class="text-xl">๐</span>
              <span class="text-sm md:text-base opacity-95">ุณุงุนุฉ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
            </div>

            <h1 class="mt-3 text-2xl md:text-4xl font-extrabold leading-snug">
              ุฑุญูุฉ ุฅูู ูุฏุฑุณุฉ ุงููุณุชูุจู
            </h1>
            <p class="mt-2 text-white/85 leading-relaxed">
              ุงูุชุจ ุจุฑููุจุช ูููุ ูููุฏ ุตูุฑุฉ ุนุจุฑ Copilotุ ุซู ุดุงุฑู ุงูุตูุฑุฉ ูุน ุงููุต ูู ูููุฐุฌ ุงููุดุงุฑูุฉ.
            </p>
          </div>
        </div>

        <!-- Header Buttons -->
        <div class="flex gap-3 flex-wrap">
          <button id="btnQuick" class="ring-soft px-4 py-2 rounded-2xl bg-white/10 hover:bg-white/15 active:scale-[.99] transition">
            โก ุจุฑููุจุช ุณุฑูุน
          </button>

          <a id="btnHourAIHeader" target="_blank" rel="noopener"
             class="ring-soft px-4 py-2 rounded-2xl bg-white/10 hover:bg-white/15 active:scale-[.99] transition inline-flex items-center gap-2"
             href="#">
            ๐ค ุฑุงุจุท ุณุงุนุฉ ุงูุฐูุงุก
          </a>

          <button id="btnPrint" class="ring-soft px-4 py-2 rounded-2xl bg-white/10 hover:bg-white/15 active:scale-[.99] transition">
            ๐จ๏ธ ุทุจุงุนุฉ ุงูุชุนูููุงุช
          </button>
        </div>

      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-14">
    <div class="grid lg:grid-cols-3 gap-5">

      <!-- Steps -->
      <section class="glass soft-shadow rounded-3xl p-6 lg:col-span-1">
        <h2 class="text-xl font-bold mb-4">๐งญ ุฎุทูุงุช ุงููุดุงุฑูุฉ</h2>

        <ol class="space-y-3 text-white/90 leading-relaxed">
          <li class="flex gap-3">
            <span class="mt-1 w-7 h-7 rounded-full bg-white/10 border border-white/15 flex items-center justify-center text-sm">1</span>
            <div>
              <div class="font-bold">ุชุฎููู ูุฏุฑุณุฉ ุงููุณุชูุจู</div>
              <div class="text-sm text-white/75">ูุตู ุฐููุ ุฑูุจูุช ูุณุงุนุฏุ ููููุบุฑุงูุงุช ุชุนููููุฉโฆ</div>
            </div>
          </li>

          <li class="flex gap-3">
            <span class="mt-1 w-7 h-7 rounded-full bg-white/10 border border-white/15 flex items-center justify-center text-sm">2</span>
            <div>
              <div class="font-bold">ุงูุชุจ ุงูุจุฑููุจุช</div>
              <div class="text-sm text-white/75">ุงุณุชุฎุฏู ุงูููููุฏ ููุง ูุชูููู ูุตู ูุงุถุญ ููุญุฏุฏ.</div>
            </div>
          </li>

          <li class="flex gap-3">
            <span class="mt-1 w-7 h-7 rounded-full bg-white/10 border border-white/15 flex items-center justify-center text-sm">3</span>
            <div>
              <div class="font-bold">ูููุฏ ุงูุตูุฑุฉ ุนุจุฑ Copilot</div>
              <div class="text-sm text-white/75">ุงูุชุญ Copilot ูู ุงูุฒุฑ ุฃู ุงูุจุงุฑููุฏ.</div>
            </div>
          </li>

          <li class="flex gap-3">
            <span class="mt-1 w-7 h-7 rounded-full bg-white/10 border border-white/15 flex items-center justify-center text-sm">4</span>
            <div>
              <div class="font-bold">ุดุงุฑู</div>
              <div class="text-sm text-white/75">ุงุฑููู ุงูุตูุฑุฉ + ุงูุจุฑููุจุช ูู ูููุฐุฌ ุงููุดุงุฑูุฉ.</div>
            </div>
          </li>
        </ol>

        <div class="mt-6 p-4 rounded-2xl bg-black/20 border border-white/10 text-sm text-white/85">
          โ ุชุฐููุฑ ููู: ุงุฌุนู ุงูุตูุฑุฉ <b>ุจุฏูู ูุต</b> ู<b>ุจุฏูู ุดุนุงุฑุงุช</b> ู<b>ุจุฏูู ุนูุงูุงุช ูุงุฆูุฉ</b>.
        </div>

        <div class="mt-4 p-4 rounded-2xl bg-black/20 border border-white/10 text-sm text-white/85">
          ๐ ูุฑุฌุน ุงููุนุงููุฉ: <a id="hourAiLinkSide" class="underline text-white" target="_blank" rel="noopener" href="#">ุณุงุนุฉ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</a>
        </div>
      </section>

      <!-- Prompt Builder -->
      <section class="glass soft-shadow rounded-3xl p-6 lg:col-span-2">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
          <h2 class="text-xl font-bold">๐ง ููููุฏ ุงูุจุฑููุจุช</h2>

          <div class="flex items-center gap-2 bg-white/10 border border-white/15 rounded-2xl p-1 w-fit">
            <button data-lang="en" class="langBtn px-3 py-1.5 rounded-xl text-sm hover:bg-white/10 transition">English</button>
            <button data-lang="ar" class="langBtn px-3 py-1.5 rounded-xl text-sm hover:bg-white/10 transition">ุงูุนุฑุจูุฉ</button>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <div class="p-4 rounded-2xl bg-black/15 border border-white/10">
            <label class="block text-sm text-white/80 mb-2">๐ ุงูููุงู</label>
            <select id="place" class="w-full rounded-xl px-3 py-2 outline-none">
              <option value="ูุตู ุฐูู ูู ูุฏุฑุณุฉ ูุณุชูุจููุฉ">ูุตู ุฐูู ูู ูุฏุฑุณุฉ ูุณุชูุจููุฉ</option>
              <option value="ูุฎุชุจุฑ STEM ูุชุทูุฑ ุฏุงุฎู ูุฏุฑุณุฉ ุฐููุฉ">ูุฎุชุจุฑ STEM ูุชุทูุฑ ุฏุงุฎู ูุฏุฑุณุฉ ุฐููุฉ</option>
              <option value="ููุชุจุฉ ุฑูููุฉ ูุณุชูุจููุฉ ูููุฆุฉ ุจุงูุดุงุดุงุช ุงูุฐููุฉ">ููุชุจุฉ ุฑูููุฉ ูุณุชูุจููุฉ</option>
              <option value="ุณุงุญุฉ ูุฏุฑุณูุฉ ุชุทูุฑ ูููุง ุทุงุฆุฑุงุช ุฏุฑูู ุชุนููููุฉ">ุณุงุญุฉ ูุฏุฑุณูุฉ ูุณุชูุจููุฉ</option>
              <option value="ุฑูู AR/VR ููุชุนูู ุจุงููุงูุน ุงูููุชุฏ">ุฑูู AR/VR</option>
            </select>

            <label class="block text-sm text-white/80 mt-4 mb-2">๐ฏ ูุญูุฑ/ูุงุฏุฉ</label>
            <select id="subject" class="w-full rounded-xl px-3 py-2 outline-none">
              <option value="ุงูุฑูุงุถูุงุช">ุงูุฑูุงุถูุงุช</option>
              <option value="ุงูุนููู">ุงูุนููู</option>
              <option value="ุงูุฑูุจูุชุงุช">ุงูุฑูุจูุชุงุช</option>
              <option value="ุงูุจุฑูุฌุฉ">ุงูุจุฑูุฌุฉ</option>
              <option value="ุงูุชุนูู ุงูุชุนุงููู">ุงูุชุนูู ุงูุชุนุงููู</option>
            </select>

            <label class="block text-sm text-white/80 mt-4 mb-2">๐งฉ ุนูุงุตุฑ ุฐููุฉ (ุงุฎุชุฑ ูุง ููุงุณุจู)</label>
            <div class="flex flex-wrap gap-2">
              <label class="chip">
                <input type="checkbox" value="ุฑูุจูุช ูุนูู ูุดุฑุญ ุจูุทู">
                <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl bg-white/10 border border-white/15 text-sm transition">
                  ๐ค ุฑูุจูุช ูุนูู
                </span>
              </label>

              <label class="chip">
                <input type="checkbox" value="ููููุบุฑุงูุงุช ุชูุงุนููุฉ ูุดุฑุญ ุงูุฏุฑูุณ">
                <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl bg-white/10 border border-white/15 text-sm transition">
                  โจ ููููุบุฑุงู
                </span>
              </label>

              <label class="chip">
                <input type="checkbox" value="ุณุจูุฑุฉ ุฐููุฉ ุชุนุฑุถ ุฑุณููุงุช ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ">
                <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl bg-white/10 border border-white/15 text-sm transition">
                  ๐ง ุณุจูุฑุฉ ุฐููุฉ
                </span>
              </label>

              <label class="chip">
                <input type="checkbox" value="ุทูุงุจ ูุณุชุฎุฏููู ุฃุฌูุฒุฉ ููุญูุฉ ุชุนููููุฉ">
                <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl bg-white/10 border border-white/15 text-sm transition">
                  ๐ฑ ุฃุฌูุฒุฉ ููุญูุฉ
                </span>
              </label>

              <label class="chip">
                <input type="checkbox" value="ุฒุงููุฉ AR/VR ููุชุนูู ุจุงููุงูุน ุงูููุชุฏ">
                <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl bg-white/10 border border-white/15 text-sm transition">
                  ๐ฅฝ AR/VR
                </span>
              </label>

              <label class="chip">
                <input type="checkbox" value="ูุณุงุนุฏุงุช ุขููุฉ ุตุบูุฑุฉ (ุฏุฑูู/ุฑูุจูุชุงุช) ุชูุฏู ุงูุฏุนู">
                <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-xl bg-white/10 border border-white/15 text-sm transition">
                  ๐ธ ุฏุฑูู/ูุณุงุนุฏุงุช
                </span>
              </label>
            </div>
          </div>

          <div class="p-4 rounded-2xl bg-black/15 border border-white/10">
            <label class="block text-sm text-white/80 mb-2">๐จ ุงูุฃุณููุจ</label>
            <select id="style" class="w-full rounded-xl px-3 py-2 outline-none">
              <option value="realistic yet cute 3D render">3D ูุงูุนู ูุทูู</option>
              <option value="highly detailed 3D illustration, soft depth of field">ููุญุฉ 3D ุชูุตูููุฉ</option>
              <option value="cinematic lighting, ultra detailed">ุณูููุงุฆู ูุชูุงุตูู ุนุงููุฉ</option>
              <option value="soft pastel illustration, dreamy atmosphere">ุจุงุณุชูู ุญุงูู</option>
            </select>

            <label class="block text-sm text-white/80 mt-4 mb-2">๐ ุฃููุงู/ุฃุฌูุงุก</label>
            <select id="mood" class="w-full rounded-xl px-3 py-2 outline-none">
              <option value="bright friendly atmosphere, pastel neon accents">ุฅุถุงุกุฉ ูุทููุฉ + ุจุงุณุชูู ูููู</option>
              <option value="warm light, soft glow, futuristic classroom vibe">ุฏูุก ูููุนุฉ ูุงุนูุฉ</option>
              <option value="cool futuristic tones, clean modern design">ูุบูุงุช ูุณุชูุจููุฉ ุจุงุฑุฏุฉ</option>
            </select>

            <label class="block text-sm text-white/80 mt-4 mb-2">๐ซ ุงุณุชุจุนุงุฏ ุชููุงุฆู (ููู)</label>
            <div class="text-sm text-white/85 bg-white/5 border border-white/10 rounded-xl px-3 py-2">
              no text, no logos, no watermark
            </div>

            <label class="block text-sm text-white/80 mt-4 mb-2">๐ ููุงุญุธุฉ ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
            <input id="note" type="text" placeholder="ูุซุงู: ุทูุงุจ ูุจุชุณูููุ ุชุนุงูู ุฌูุงุนูุ ูุดุงุท ุฑูุงุถู..." class="w-full bg-white/10 border border-white/15 rounded-xl px-3 py-2 outline-none" />
          </div>
        </div>

        <div class="mt-4 grid md:grid-cols-2 gap-4">
          <div class="p-4 rounded-2xl bg-black/15 border border-white/10">
            <div class="flex items-center justify-between gap-3 mb-2">
              <label class="text-sm text-white/80">๐ ุงูุจุฑููุจุช ุงูููุงุฆู</label>
              <div class="flex gap-2 flex-wrap justify-end">
                <button id="btnCopy" class="px-3 py-1.5 rounded-xl bg-white/10 hover:bg-white/15 border border-white/15 text-sm transition">
                  ๐ ูุณุฎ
                </button>
                <button id="btnCopyOpen" class="px-3 py-1.5 rounded-xl bg-emerald-500/20 hover:bg-emerald-500/25 border border-emerald-300/30 text-sm transition">
                  โ ุงูุณุฎ ูุงูุชุญ Copilot
                </button>
              </div>
            </div>
            <textarea id="promptOut" rows="6" class="w-full bg-white/10 border border-white/15 rounded-xl p-3 outline-none text-sm leading-relaxed"></textarea>
            <div id="toast" class="hidden mt-2 text-sm text-emerald-200 fade-in">ุชู ุงููุณุฎ โ</div>
          </div>

          <!-- Links + QRs -->
          <div class="p-4 rounded-2xl bg-black/15 border border-white/10">
            <div class="grid sm:grid-cols-2 gap-4">

              <!-- Copilot -->
              <div class="p-4 rounded-2xl bg-white/5 border border-white/10">
                <div class="flex items-center justify-between gap-3">
                  <div>
                    <div class="font-bold">๐ Copilot</div>
                    <div class="text-sm text-white/75">ุงูุชุญ Copilot ุฃู ุงูุณุญ QR.</div>
                  </div>
                  <a id="copilotBtn" target="_blank" rel="noopener"
                     class="px-3 py-1.5 rounded-xl bg-white/10 hover:bg-white/15 border border-white/15 transition text-sm"
                     href="#">
                    ูุชุญ โ
                  </a>
                </div>

                <div class="mt-3 flex items-center gap-3">
                  <a id="qrLinkCopilot" target="_blank" rel="noopener" href="#" class="inline-flex items-center justify-center p-2 rounded-2xl bg-white/90 text-black">
                    <canvas id="qrCanvasCopilot" width="150" height="150" class="rounded-xl"></canvas>
                  </a>
                </div>

                <div class="mt-3 text-sm text-white/85">
                  <div class="font-bold mb-1">ุงูุฑุงุจุท:</div>
                  <div class="bg-white/10 border border-white/15 rounded-xl px-3 py-2 break-all" id="copilotUrlText"></div>
                </div>
              </div>

              <!-- Hour of AI -->
              <div class="p-4 rounded-2xl bg-white/5 border border-white/10">
                <div class="flex items-center justify-between gap-3">
                  <div>
                    <div class="font-bold">โฑ๏ธ ุณุงุนุฉ ุงูุฐูุงุก</div>
                    <div class="text-sm text-white/75">ุงูุชุญ ุตูุญุฉ Hour of AI ุฃู ุงูุณุญ QR.</div>
                  </div>
                  <a id="hourAiBtn" target="_blank" rel="noopener"
                     class="px-3 py-1.5 rounded-xl bg-white/10 hover:bg-white/15 border border-white/15 transition text-sm"
                     href="#">
                    ูุชุญ โ
                  </a>
                </div>

                <div class="mt-3 flex items-center gap-3">
                  <a id="qrLinkHourAI" target="_blank" rel="noopener" href="#" class="inline-flex items-center justify-center p-2 rounded-2xl bg-white/90 text-black">
                    <canvas id="qrCanvasHourAI" width="150" height="150" class="rounded-xl"></canvas>
                  </a>
                </div>

                <div class="mt-3 text-sm text-white/85">
                  <div class="font-bold mb-1">ุงูุฑุงุจุท:</div>
                  <div class="bg-white/10 border border-white/15 rounded-xl px-3 py-2 break-all" id="hourAiUrlText"></div>
                </div>
              </div>

            </div>

            <div class="mt-4 p-3 rounded-xl bg-white/5 border border-white/10 text-sm text-white/85">
              ๐ก ุชูููุญ: ุจุนุฏ ูุง ุชูุตู ุงูุจุฑููุจุช ูู Copilotุ ุงุทูุจ: <b>Generate an image</b> ุฃู <b>Create an image</b>.
            </div>
          </div>
        </div>

        <div class="mt-4 p-4 rounded-2xl bg-black/15 border border-white/10">
          <div class="flex items-center justify-between gap-3 flex-wrap">
            <div class="font-bold">โ ูุงุฆูุฉ ุฌุงูุฒูุฉ ูุจู ุงูุฅุฑุณุงู</div>
            <div id="readyBadge" class="hidden px-3 py-1.5 rounded-full bg-emerald-500/20 border border-emerald-300/30 text-sm fade-in">
              ุฃุญุณูุช! ุฌุงูุฒ ูููุดุงุฑูุฉ ๐
            </div>
          </div>

          <div class="mt-3 grid md:grid-cols-2 gap-2 text-sm text-white/90">
            <label class="flex items-center gap-2 bg-white/5 border border-white/10 rounded-xl px-3 py-2">
              <input class="chk" type="checkbox">
              <span>ุงูุตูุฑุฉ ุจุฏูู ูุตูุต.</span>
            </label>
            <label class="flex items-center gap-2 bg-white/5 border border-white/10 rounded-xl px-3 py-2">
              <input class="chk" type="checkbox">
              <span>ุงูุตูุฑุฉ ุจุฏูู ุดุนุงุฑุงุช ุฃู ุนูุงูุฉ ูุงุฆูุฉ.</span>
            </label>
            <label class="flex items-center gap-2 bg-white/5 border border-white/10 rounded-xl px-3 py-2">
              <input class="chk" type="checkbox">
              <span>ูุชุจุช ุจุฑููุจุช ูุงุถุญ ููุญุฏุฏ.</span>
            </label>
            <label class="flex items-center gap-2 bg-white/5 border border-white/10 rounded-xl px-3 py-2">
              <input class="chk" type="checkbox">
              <span>ุญูุธุช ุงูุตูุฑุฉ + ุงูุจุฑููุจุช ูุฑูุนูุง ูู ูููุฐุฌ ุงููุดุงุฑูุฉ.</span>
            </label>
          </div>
        </div>
      </section>
    </div>

    <!-- โ ุงูุชุฐููู ุงููุทููุจ -->
    <footer class="mt-8 text-center text-white/80 text-sm">
      <div class="glass rounded-2xl py-3 px-4 inline-block">
        /ููุณูุฉ ุณุงุนุฉ ุจุฑูุฌุฉ ุฃ/ูุงุทูุฉ ูุฒุงุฒู ,,ุงูููุชูู ุงูุชูุงุนูู
      </div>
    </footer>
  </main>

<script>
  // โ ุฑูุงุจุท ุซุงุจุชุฉ
  const COPILOT_URL = "https://copilot.microsoft.com/";
  const HOUR_AI_URL = "https://code.org/ar/hour-of-ai";

  const els = {
    langBtns: document.querySelectorAll(".langBtn"),
    place: document.getElementById("place"),
    subject: document.getElementById("subject"),
    style: document.getElementById("style"),
    mood: document.getElementById("mood"),
    note: document.getElementById("note"),
    promptOut: document.getElementById("promptOut"),
    toast: document.getElementById("toast"),
    btnCopy: document.getElementById("btnCopy"),
    btnCopyOpen: document.getElementById("btnCopyOpen"),
    btnQuick: document.getElementById("btnQuick"),
    btnPrint: document.getElementById("btnPrint"),

    // Hour of AI links
    btnHourAIHeader: document.getElementById("btnHourAIHeader"),
    hourAiLinkSide: document.getElementById("hourAiLinkSide"),
    hourAiBtn: document.getElementById("hourAiBtn"),
    hourAiUrlText: document.getElementById("hourAiUrlText"),
    qrLinkHourAI: document.getElementById("qrLinkHourAI"),
    qrCanvasHourAI: document.getElementById("qrCanvasHourAI"),

    // Copilot links
    copilotBtn: document.getElementById("copilotBtn"),
    copilotUrlText: document.getElementById("copilotUrlText"),
    qrLinkCopilot: document.getElementById("qrLinkCopilot"),
    qrCanvasCopilot: document.getElementById("qrCanvasCopilot"),

    readyBadge: document.getElementById("readyBadge"),
    chks: document.querySelectorAll(".chk"),
    chips: document.querySelectorAll(".chip input"),
  };

  let LANG = "en";

  function getSelectedElements(){
    const picked = [];
    els.chips.forEach(ch => { if(ch.checked) picked.push(ch.value); });
    return picked;
  }

  function buildPrompt(){
    const place = els.place.value.trim();
    const subject = els.subject.value.trim();
    const style = els.style.value.trim();
    const mood = els.mood.value.trim();
    const note = els.note.value.trim();
    const features = getSelectedElements();
    const neg = "no text, no logos, no watermark";

    if(LANG === "ar"){
      const feats = features.length ? "ุ " + features.join("ุ ") : "";
      const extra = note ? "ุ " + note : "";
      return `ุฏุงุฎู ${place}ุ ุทูุงุจ ูุชุนูููู ${subject}${feats}ุ ุฃุฌูุงุก ${mood}ุ ุฃุณููุจ ${style}ุ ุชูุงุตูู ูุงุฆูุฉุ ุฅุถุงุกุฉ ุณูููุงุฆูุฉุ ุฌูุฏุฉ ุนุงููุฉุ ${neg}${extra}`;
    }

    const feats = features.length ? ", " + features.join(", ") : "";
    const extra = note ? ", " + note : "";
    return `Inside a ${place}, students learning ${subject}${feats}, ${mood}, ${style}, cinematic light, ultra detail, high quality, ${neg}${extra}`;
  }

  function refresh(){
    els.promptOut.value = buildPrompt();
  }

  async function copyText(text){
    try{
      await navigator.clipboard.writeText(text);
      showToast();
      return true;
    }catch(e){
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      showToast();
      return true;
    }
  }

  function showToast(){
    els.toast.classList.remove("hidden");
    setTimeout(()=> els.toast.classList.add("hidden"), 1200);
  }

  function initLinksAndQR(){
    // Copilot
    els.copilotBtn.href = COPILOT_URL;
    els.qrLinkCopilot.href = COPILOT_URL;
    els.copilotUrlText.textContent = COPILOT_URL;

    // Hour of AI
    els.btnHourAIHeader.href = HOUR_AI_URL;
    els.hourAiLinkSide.href = HOUR_AI_URL;
    els.hourAiBtn.href = HOUR_AI_URL;
    els.qrLinkHourAI.href = HOUR_AI_URL;
    els.hourAiUrlText.textContent = HOUR_AI_URL;

    // QR render
    QRCode.toCanvas(els.qrCanvasCopilot, COPILOT_URL, { width: 150, margin: 1 }, err => { if(err) console.error(err); });
    QRCode.toCanvas(els.qrCanvasHourAI, HOUR_AI_URL, { width: 150, margin: 1 }, err => { if(err) console.error(err); });
  }

  function checkReady(){
    const ok = [...els.chks].every(c => c.checked);
    els.readyBadge.classList.toggle("hidden", !ok);
  }

  // Events
  els.langBtns.forEach(btn=>{
    btn.addEventListener("click", ()=>{
      LANG = btn.dataset.lang;
      els.langBtns.forEach(b=> b.classList.remove("bg-white/20","border","border-white/25"));
      btn.classList.add("bg-white/20","border","border-white/25");
      refresh();
    });
  });

  [els.place, els.subject, els.style, els.mood, els.note].forEach(el => el.addEventListener("input", refresh));
  els.chips.forEach(ch => ch.addEventListener("change", refresh));

  els.btnCopy.addEventListener("click", ()=> copyText(els.promptOut.value));

  els.btnCopyOpen.addEventListener("click", async ()=>{
    await copyText(els.promptOut.value);
    window.open(COPILOT_URL, "_blank", "noopener");
  });

  els.btnQuick.addEventListener("click", ()=>{
    els.place.value = "ูุตู ุฐูู ูู ูุฏุฑุณุฉ ูุณุชูุจููุฉ";
    els.subject.value = "ุงูุฑูุงุถูุงุช";
    els.style.value = "realistic yet cute 3D render";
    els.mood.value = "bright friendly atmosphere, pastel neon accents";
    els.note.value = "interactive holograms explaining math gently";

    els.chips.forEach(ch => ch.checked = false);
    const want = new Set([
      "ุฑูุจูุช ูุนูู ูุดุฑุญ ุจูุทู",
      "ููููุบุฑุงูุงุช ุชูุงุนููุฉ ูุดุฑุญ ุงูุฏุฑูุณ",
      "ุณุจูุฑุฉ ุฐููุฉ ุชุนุฑุถ ุฑุณููุงุช ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ",
      "ุทูุงุจ ูุณุชุฎุฏููู ุฃุฌูุฒุฉ ููุญูุฉ ุชุนููููุฉ",
      "ุฒุงููุฉ AR/VR ููุชุนูู ุจุงููุงูุน ุงูููุชุฏ"
    ]);
    els.chips.forEach(ch => { if(want.has(ch.value)) ch.checked = true; });

    LANG = "en";
    els.langBtns.forEach(b=> b.classList.remove("bg-white/20","border","border-white/25"));
    document.querySelector('.langBtn[data-lang="en"]').classList.add("bg-white/20","border","border-white/25");

    refresh();
  });

  els.btnPrint.addEventListener("click", ()=> window.print());
  els.chks.forEach(c => c.addEventListener("change", checkReady));

  // Start
  initLinksAndQR();
  document.querySelector('.langBtn[data-lang="en"]').classList.add("bg-white/20","border","border-white/25");
  refresh();
</script>
</body>
</html>
